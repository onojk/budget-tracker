{% extends "base.html" %}
{% block title %}Import Report{% endblock %}

{% block content %}
<h1>OCR Import Report</h1>

<p>This is the raw stats object returned by <code>process_uploaded_statement_files</code>:</p>

<pre>{{ stats }}</pre>

{% if stats is mapping %}
  <h2>Summary</h2>
  <ul>
  {% for key, value in stats.items() %}
    {% if key != "per_file" %}
      <li><strong>{{ key }}:</strong> {{ value }}</li>
    {% endif %}
  {% endfor %}
  </ul>

  {% if stats.per_file is defined %}
    <h2>Per-file details</h2>
    <table class="table">
      <thead>
        <tr>
          <th>Filename</th>
          <th>Rows</th>
          <th>Rejected</th>
        </tr>
      </thead>
      <tbody>
        {% for f in stats.per_file %}
          <tr>
            <td>{{ f.filename }}</td>
            <td>{{ f.rows }}</td>
            <td>{{ f.rejected }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
{% endif %}

<p><a href="{{ url_for('import_ocr') }}">Back to OCR import</a></p>
{% endblock %}
